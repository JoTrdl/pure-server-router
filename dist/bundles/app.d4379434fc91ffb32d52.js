webpackJsonp([5],{2:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,u){try{var a=t[o](u),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchRoute=t.Link=t.Router=void 0;var u=n(4),a=r(u),i=function(){var e=o(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"ClientFetchRequest"}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),c=n(86),l=r(c),s=n(89),f=r(s);t.Router=l.default,t.Link=f.default,t.fetchRoute=i},25:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case c:case i:return t.payload.context;default:return e}}function o(e){return function(t){return(0,a.fetchRoute)(e).then(function(e){return t(s(e))}).catch(function(e){return t(l({context:e}))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.fetchContext=o;var u=n(91),a=n(2),i="context/FETCH_CONTEXT_ERROR",c="context/SET_CONTEXT",l=(0,u.createAction)(i),s=(0,u.createAction)(c)},26:function(e,t,n){function r(e){var t=o[e];return t?n.e(t[1]).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var o={"./Demo":[27,4],"./Demo.jsx":[27,4],"./Docs":[28,3],"./Docs.jsx":[28,3],"./Home":[29,2],"./Home.jsx":[29,2],"./NotFound":[30,1],"./NotFound.jsx":[30,1],"./ServerError":[31,0],"./ServerError.jsx":[31,0]};r.keys=function(){return Object.keys(o)},r.id=26,e.exports=r},32:function(e,t,n){e.exports=n(33)},33:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(0),u=r(o),a=n(35),i=n(45),c=r(i),l=n(51),s=r(l),f=n(92),p=r(f);n(95),n(96),n(97),n(98);var d=function(e){var t=(0,c.default)(),n=(0,p.default)(window.INITIAL_STATE||{});(0,a.hydrate)(u.default.createElement(s.default,{history:t,store:n,initialView:e}),document.getElementById("root"))};document.addEventListener("DOMContentLoaded",function(){n(26)("./"+window.INITIAL_STATE.context.view.component).then(function(e){return d(e.default)}).catch(d)})},51:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,u){try{var a=t[o](u),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}return r("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(4),l=r(c),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),p=r(f),d=n(54),h=n(84),v=r(h),y=n(2),m=n(25),w=n(8),b=function(e){function t(e){u(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={component:e.initialView},e.initialView||n.loadAsyncComponent(e.context.view.component),n.onRouteChange=n.onRouteChange.bind(n),n.scrollPositions={},n}return i(t,e),s(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"loadAsyncComponent",value:function(){function e(e){return t.apply(this,arguments)}var t=o(l.default.mark(function e(t){var r,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||this.props.context.view.component,e.next=3,n(26)("./"+r);case 3:o=e.sent,this.setState({component:o.default}),this.forceUpdate();case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"onRouteChange",value:function(){function e(e){return t.apply(this,arguments)}var t=o(l.default.mark(function e(t){var n,r,o=t.to,u=t.state,a=t.action;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"PUSH"===a&&(this.scrollPositions[u.navKey]=(0,w.scrollPosition)()),e.next=4,this.props.fetchContext(o);case 4:return n=e.sent,r=n.payload.context,document.title=r.metadata.title||"Pure Server Router",e.next=9,this.loadAsyncComponent(r.view.component);case 9:return(0,w.scrollPosition)("POP"===a?this.scrollPositions[u.navKey]:null),(0,w.sendPageviewEvent)(r.location.url),e.abrupt("return",r.location.url);case 14:e.prev=14,e.t0=e.catch(0),window.location=o;case 17:case"end":return e.stop()}},e,this,[[0,14]])}));return e}()},{key:"render",value:function(){var e=this.props,t=e.history,n=e.store,r=e.context;return p.default.createElement(d.Provider,{store:n},p.default.createElement(y.Router,{history:t,onChange:this.onRouteChange},this.state.component&&p.default.createElement(v.default,{viewprops:r.view.props},p.default.createElement(this.state.component,r.view.props))))}}]),t}(p.default.Component);t.default=(0,d.connect)(function(e){return{context:e.context}},function(e){return{fetchContext:function(t){return e((0,m.fetchContext)(t))}}},null,{withRef:!0})(b)},8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"!=typeof window,o=r&&window.performance&&window.performance.now?window.performance:Date,u=function(e){if(void 0!==e){var t=e||{x:0,y:0};return void setTimeout(function(){window.scrollTo(t.x,t.y)})}var n=window.document.documentElement;return{x:window.pageXOffset||n.scrollLeft||0,y:window.pageYOffset||n.scrollTop||0}},a=function(e){window.ga&&(window.ga("set","page",e),window.ga("send","pageview"))};t.isBrowser=r,t.Time=o,t.scrollPosition=u,t.sendPageviewEvent=a},84:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return[a.default.createElement(c.default,{key:"header",alt:e.viewprops.alt}),a.default.createElement("main",{key:"main"},e.children&&e.children),a.default.createElement(s.default,{key:"footer",alt:e.viewprops.alt})]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var u=n(0),a=r(u),i=n(85),c=r(i),l=n(90),s=r(l)},85:function(e,t,n){"use strict";function r(e){var t=e.alt&&"alt"||"";return u.default.createElement("header",{className:t},u.default.createElement("nav",{className:"clearfix"},u.default.createElement("h1",null,u.default.createElement(a.Link,{to:"/",className:"nav-title"},"Pure Server Router")),u.default.createElement("ul",{className:"nav-list float-right"},u.default.createElement("li",null,u.default.createElement(a.Link,{to:"/docs",match:!0},"Docs")),u.default.createElement("li",null,u.default.createElement(a.Link,{to:"/demos",match:!0},"Demos"))),u.default.createElement("a",{href:"https://github.com/JoTrdl/pure-server-router",target:"_blank",rel:"noopener noreferrer"},u.default.createElement("svg",{className:"octocat",viewBox:"0 0 250 250"},u.default.createElement("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),u.default.createElement("path",{className:"octocat-arm",d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"}),u.default.createElement("path",{className:"octocat-body",d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"})))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(o),a=n(2)},86:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,u){try{var a=t[o](u),i=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(i).then(function(e){r("next",e)},function(e){r("throw",e)});e(i)}return r("next")})}}function c(e,t){var n=this,r=e.history;e.location;if(!r)throw new Error('Error: "Router" component requires a history prop passed');return"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),{navKey:m.Time.now().toFixed(3),listen:r.listen,push:function(){function e(e){return o.apply(this,arguments)}var o=i(s.default.mark(function e(o){var u,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=r.location,u.pathname+u.search!==o){e.next=3;break}return e.abrupt("return");case 3:t(o,a,"PUSH");case 4:case"end":return e.stop()}},e,n)}));return e}(),get location(){var e=r.location;return{path:e.pathname,search:e.search,url:e.pathname+e.search,get query(){return!1===e.search.startsWith("?")?{}:e.search.slice(1).split("&").reduce(function(e,t){var n=t.split("="),r=p(n,2),o=r[0],u=r[1];return o&&u&&(e[o]=u),e},{})}}}}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),s=r(l),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(){function e(e,t){var n=[],r=!0,o=!1,u=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,u=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw u}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=n(0),h=r(d),v=n(24),y=r(v),m=n(8),w=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onRouteChange=n.onRouteChange.bind(n);var r=n.props.location;return n.router=m.isBrowser?c(e,n.onRouteChange):{location:r,listen:function(){}},n}return a(t,e),f(t,[{key:"componentWillMount",value:function(){var e=this;this.unlisten=this.router.listen(function(t,n){"POP"===n&&e.onRouteChange(e.router.location.url,t.state,"POP")})}},{key:"componentWillUnmount",value:function(){this.unlisten&&this.unlisten()}},{key:"onRouteChange",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=i(s.default.mark(function e(t,n,r){var o,u,a,i,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.props,u=o.history,a=o.onChange,"PUSH"===r&&(i=u.location,i.state=i.state||{},i.state.navKey=n.navKey=this.router.navKey,u.replace(i)),e.next=4,a({to:t,state:n,action:r});case 4:c=e.sent,"PUSH"===r&&(u.push(c||t,n),this.router.navKey=m.Time.now().toFixed(3));case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"getChildContext",value:function(){return{router:this.router}}},{key:"render",value:function(){return this.props.children}}]),t}(h.default.Component);w.childContextTypes={router:y.default.object},t.default=w},89:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){var n=[],r=!0,o=!1,u=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,u=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw u}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),p=r(f),d=n(24),h=r(d),v=function(e){function t(){return u(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"componentWillMount",value:function(){var e=this;this.unlisten=this.context.router.listen(function(){return e.forceUpdate()})}},{key:"componentWillUnmount",value:function(){this.unlisten&&this.unlisten()}},{key:"render",value:function(){var e=this.context.router,t=e.location,n=this.props,r=n.to,u=n.exact,a=n.match,i=n.withQueries,s=n.active,f=n.activeClassName,d=n.className,h=n.children,v=n.onClick,y=o(n,["to","exact","match","withQueries","active","activeClassName","className","children","onClick"]),m=r||"#",w=m.split("?",2),b=l(w,2),_=b[0],O=b[1],C=d||"",x=u?t.path===_:a?t.path.match(_):s;if(i){var E=(O||"").split("&").reduce(function(e,t){var n=t.split("="),r=l(n,2),o=r[0],u=r[1];return e[o||""]=u||"",e},{});x=(Array.isArray(i)?i:Object.keys(E)).every(function(e){return E[e]===""+(t.query||{})[e]})}return x&&(C+=(" "+(f||"active")).trim()),y.onClick=function(t){0!==t.button||t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||(t.preventDefault(),"function"==typeof v&&v(t),e.push(m))},p.default.createElement("a",c({href:m,className:C},y),h)}}]),t}(p.default.Component);v.contextTypes={router:h.default.object},t.default=v},90:function(e,t,n){"use strict";function r(e){var t=e.alt&&"alt"||"";return u.default.createElement("footer",{className:["center","v-align",t].join(" ")},u.default.createElement("p",{className:"no-margin"},"MIT License. Copyright © ",(new Date).getFullYear()))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(o)},91:function(e,t,n){"use strict";function r(e){return function(t){return{type:e,payload:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.createAction=r},92:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),u=n(93),a=r(u),i=n(8),c=n(94),l=r(c),s=i.isBrowser&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.compose;t.default=function(e){return(0,o.createStore)(l.default,e,s((0,o.applyMiddleware)(a.default)))}},94:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(25),u=function(e){return e&&e.__esModule?e:{default:e}}(o);t.default=(0,r.combineReducers)({context:u.default})},95:function(e,t){},96:function(e,t){},97:function(e,t){},98:function(e,t){}},[32]);